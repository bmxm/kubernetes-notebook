
对于已经过期的数据，Redis将使用两种策略来删除这些过期键，分别是惰性删除和定期删除。

- 惰性删除是指Redis服务器不主动删除过期的键值，而是当访问键值时再检查当前的键值是否过期，如果过期则执行删除并返回null给客户端，没有过期则正常返回值信息给客户端。
优点是不会浪费太多的系统资源，只是在每次访问时才检查键值是否过期。缺点是删除过期键不及时，造成了一定的空间浪费。

- 定期删除是指Redis每隔一段时间检查一下数据库，看看是否有过期键可以被清除。
默认情况下Redis定期检查的频率是每秒扫描10次，配置在redis.conf中: `hz 10` 。
定期删除并不是遍历所有的键值对，而是采取随机抽取的形式，每次从过期字典中，取出20个键进行检查。过期字典中存储的是所有设置了过期时间的键值对。如果这批检查的数据中有25%的数据过期，则会进行继续抽取，直到小于该比例。





### Redis 内存淘汰算法

当Redis内存不够用时，Redis服务器会根据服务器设置的淘汰策略，删除一些不常用的数据，以保证Redis服务器的顺利运行。


- LRU （Least Recently Used, 最近最少使用）淘汰算法：是一种常见的页面置换算法。

LRU 是基于链表结构实现的，链表中的元素按照操作顺序从前往后排列，最新操作的键会被移到表头，当需要进行内存淘汰时，只需要删除链表尾部的数据集合。

Redis使用的是一种近似LRU算法，目的是为了更好的节约内存，它的实现方式是给现有的数据结构添加一个额外的字段，用于记录此键值的最后一次访问时间。Redis内存淘汰时，会使用随机取样的方式来淘汰数据，随机取5个值（可配置），然后淘汰最久没有使用的。


- LFU （Least Frequently Used, 最不常用的）的淘汰算法：




Redis 内存淘汰策略使用了 LFU 和近 LRU 的淘汰算法，具体使用哪种淘汰算法，要看服务器是如何设置内存淘汰策略的，也就是要看“maxmemory- policy”的值是如何设置的。
