先说在前面，有序集合是由双hashmap构成的字典和跳跃表实现的。







### 跳表索引动态更新

当我们不停的往跳表中插入数据时，如果我们不更新索引，就有可能出现某2个索引结点之间的数据非常之多的情况。极端情况下，跳表还会退化成单链表。

做为一种动态数据结构，我们需要某种手段来维护索引与原始链表大小之间的平衡，也就是说，如果链表中结点多了，索引结点就相应的增加一些，避免复杂度退化，以及查找、插入、删除操作性能下降。


像红黑树、AVL树这样的平衡二叉树，是通过左右旋的方式保持左右子树的大小平衡，而跳表是通过随机函数来维护前面提到的“平衡性”。




### 解答开篇

首先，要看Redis中有序集合支持的核心操作：插入、删除、查找、按区间查找、迭代输出有序序列。
其中，插入、删除、查找以及迭代输出有序序列这几个操作，红黑树也可以完成，时间复杂度也是一样的，但是按区间查找数据这个操作，红黑树的效率没有跳表高。

对于按区间查找数据这个操作，跳表可以做到O（log n）的时间复杂度定位区间的起点，然后在原始链表中顺序往后遍历就可以了。


不过，跳表也不能完全代替红黑树。因为红黑树比跳表出现的要早一点，很多语言都有现成的实现，可以拿来即用。