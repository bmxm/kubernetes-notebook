


## 1 四种事务隔离级别和三种异常现象

### 1.1 标准的事务隔离级别

在数据库中标准的事务隔离级别有如下四种：
- 读未提交
- 读已提交
- 可重复读
- 序列化

对应的从读已提交开始，每种隔离基本会解决一种异常现象。分别为：脏读、幻读、不可重复读。

- 1 脏读
    - 当一个事务被允许读取另一个事务修改但未提交的数据时，就会可能发生脏读。原因是另一个事务可能会执行回滚操作。
    
- 2 不可重复读
    - 当事务内相同的记录被检索两次，且两次得到的结果不同时，此现象称为不可重复读。
    
- 3 幻读
    - 在事务执行过程中，另一个事务将新记录添加到正在读取的事务中时，会发生幻读。幻读是不可重复读的一种特殊情况。MySQL可以通过增加间隙锁来防止幻读的发生。
    
    

### 1.2 调整事务隔离级别

在MySQL中可以通过设置`transaction_isolation`参数来调整数据库事务隔离级别，默认的事务隔离级别是可重复读，但是为了避免锁等待，通常我们会将事务的隔离级别设置为读已提交。

可以通过使用命令行参数或修改配置文件的方式修改事务的隔离级别，如
`SET GLOBAL transaction_isolation = 'READ-COMMITTED'`    



## 2 从事务提交谈起

在数据库中，当执行事务提交动作之后，


### 2.1 事务提交

在MySQL中，默认是自动提交事务的。


可以通过以下四种方式提交事务：
- 执行commit语句
- DDL语句隐式提交
- 开启自动提交（`set autocommit = 0`）
- 在事务中开启事务


事务的回滚方式：
- 执行rollback语句。
- 因达到超时时间而发生语句级或者事务级的回滚。
- 检测到死锁时发生回滚。

### 2.2 数据库中的文件


## 3 MySQL中的Redo日志

- 


## 4 MVCC介绍